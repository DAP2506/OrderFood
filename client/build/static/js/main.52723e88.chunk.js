(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{40:function(e,t,a){},41:function(e,t,a){},48:function(e,t,a){},50:function(e,t,a){},69:function(e,t,a){"use strict";a.r(t);var s=a(1),c=a.n(s),n=a(33),r=a.n(n),i=(a(40),a(5)),l=a(4),o=Object(s.createContext)(),d=Object(s.createContext)(),j=(a(41),a(0)),u=function(){var e=Object(s.useContext)(o),t=Object(s.useContext)(d);Object(s.useEffect)((function(){e.loadUser()}),[]);var a=Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("li",{children:Object(j.jsx)("a",{href:"/register",children:"Register"})}),Object(j.jsx)("li",{children:Object(j.jsx)("a",{href:"/login",children:"Login"})})]}),c=Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("li",{children:Object(j.jsx)(i.b,{to:"/res/all",children:"All Restaurants"})}),Object(j.jsx)("li",{children:Object(j.jsxs)(i.b,{to:"/home",children:["My"," ",e.user&&"user"===e.user.role?"Orders":"Restaurants"]})}),Object(j.jsx)("li",{children:Object(j.jsx)("a",{href:"/",onClick:function(){e.logout(),t.clearRes()},children:"Logout"})})]});return Object(j.jsx)("nav",{className:"black",style:{color:"black"},children:Object(j.jsx)("div",{className:"nav-wrapper",children:Object(j.jsxs)("div",{className:"container",children:[!0===e.isAuthenticated&&Object(j.jsx)("a",{href:"#","data-target":"slide-out",class:"sidenav-trigger",children:Object(j.jsx)("i",{class:"material-icons",children:"menu"})}),Object(j.jsx)(i.b,{to:"/",className:"brand-logo",children:"OrderMeal"}),Object(j.jsx)("ul",{id:"nav-mobile",className:"right hide-on-med-and-down",children:"/"!==Object(l.g)().pathname?e.isAuthenticated?c:a:""})]})})})},b=(a(48),function(){return Object(j.jsx)("footer",{className:"footer grey darken-4",children:Object(j.jsxs)("div",{className:"container white-text",children:[Object(j.jsx)("div",{className:"left",children:Object(j.jsxs)("h6",{children:["Copyright \xa9 ",(new Date).getFullYear()]})}),Object(j.jsxs)("div",{className:"right",children:[Object(j.jsxs)("h5",{children:["Made by"," ",Object(j.jsx)("a",{href:"https://github.com/DAP2506/orderMeal",target:"_blank",children:Object(j.jsx)("span",{className:"blue-text",children:"Dhruv Panchal"})})]}),Object(j.jsx)("a",{href:"https://www.linkedin.com/in/dhruv-panchal-a61a51200/",class:"fa fa-linkedin"}),Object(j.jsx)("a",{href:"https://github.com/DAP2506",class:"fa fa-github"}),Object(j.jsx)("a",{href:"#",class:"fa fa-facebook"}),Object(j.jsx)("a",{href:"#",class:"fa fa-twitter"}),Object(j.jsx)("a",{href:"#",class:"fa fa-instagram"}),Object(j.jsx)("a",{href:"#",class:"fa fa-youtube"})]})]})})}),m=a(13),h=a(2),O=a(7),p=Object(s.createContext)(),x=function(){var e=Object(s.useContext)(p).alert;return e&&Object(j.jsxs)("div",{className:"card-panel alert"+" ".concat(e.type),children:[Object(j.jsx)("i",{className:"fas fa-info-circle"})," ",e.msg]})},f=function(e){var t=Object(s.useState)({name:"",email:"",password:"",confirmPassword:"",role:"null"}),a=Object(O.a)(t,2),c=a[0],n=a[1],r=Object(s.useContext)(o),l=Object(s.useContext)(p).setAlert,d=r.register,u=r.error,b=r.isAuthenticated,f=r.clearErrors,v=c.name,g=c.email,y=c.password,N=c.confirmPassword,w=c.role;Object(s.useEffect)((function(){!0===b&&e.history.push("/home"),u&&(l(u,"danger"),f()),window.M.FormSelect.init(document.querySelector("select"))}),[u,b,e.history]);var C=function(e){n(Object(h.a)(Object(h.a)({},c),{},Object(m.a)({},e.target.name,e.target.value)))};return Object(j.jsx)("div",{className:"form-container container",children:Object(j.jsxs)("div",{className:"card",children:[Object(j.jsx)(x,{}),Object(j.jsxs)("div",{className:"card-content",children:[Object(j.jsx)("div",{className:"card-title center",children:Object(j.jsx)("h4",{style:{fontWeight:500},children:"Register Your Account"})}),Object(j.jsxs)("div",{className:"row",children:[Object(j.jsxs)("form",{className:"col s12 m6 offset-m3",onSubmit:function(e){e.preventDefault(),y!==N?(l("Passwords do not match","primary"),f()):"null"===w?(l("Please select a role","primary"),f()):d(c)},children:[Object(j.jsxs)("div",{className:"input-field",children:[Object(j.jsx)("input",{type:"text",name:"name",required:!0,value:v,onChange:C}),Object(j.jsx)("label",{htmlFor:"name",children:"Name"})]}),Object(j.jsxs)("div",{className:"input-field",children:[Object(j.jsx)("input",{type:"email",name:"email",required:!0,value:g,onChange:C}),Object(j.jsx)("label",{htmlFor:"email",children:"Email"})]}),Object(j.jsxs)("div",{className:"input-field",children:[Object(j.jsx)("input",{type:"password",name:"password",minLength:"6",required:!0,values:y,onChange:C}),Object(j.jsx)("label",{htmlFor:"password",children:"Password"})]}),Object(j.jsxs)("div",{className:"input-field",children:[Object(j.jsx)("input",{type:"password",name:"confirmPassword",minLength:"6",required:!0,value:N,onChange:C}),Object(j.jsx)("label",{htmlFor:"name",children:"Confirm Password"})]}),Object(j.jsxs)("div",{className:"input-field",children:[Object(j.jsxs)("select",{required:!0,value:w,onChange:function(e){n(Object(h.a)(Object(h.a)({},c),{},{role:e.target.value}))},children:[Object(j.jsx)("option",{value:"null",defaultValue:!0,children:"Choose your option"}),Object(j.jsx)("option",{value:"restaurant",children:"Restaurant Manager"}),Object(j.jsx)("option",{value:"user",children:"Consumer"})]}),Object(j.jsx)("label",{children:"Apply as"})]}),Object(j.jsx)("button",{className:"btn waves-effect teal darken-3 submitBtn",type:"submit",value:"Register",children:"Register"})]}),Object(j.jsx)("div",{className:"row",children:Object(j.jsx)("div",{className:"col s12 m6 offset-m3",children:Object(j.jsxs)("p",{className:"small",children:["Already have an account? ",Object(j.jsx)(i.b,{to:"/login",children:"Login"})]})})})]})]})]})})},v=function(e){var t=Object(s.useState)({email:"",password:""}),a=Object(O.a)(t,2),c=a[0],n=a[1],r=Object(s.useContext)(o),l=Object(s.useContext)(p).setAlert,d=r.login,u=r.error,b=r.isAuthenticated,f=r.clearErrors,v=c.email,g=c.password;Object(s.useEffect)((function(){!0===b&&e.history.push("/home"),u&&(l(u,"danger"),f())}),[u,b,e.history]);var y=function(e){n(Object(h.a)(Object(h.a)({},c),{},Object(m.a)({},e.target.name,e.target.value)))};return Object(j.jsx)("div",{className:"form-container container",children:Object(j.jsxs)("div",{className:"card",children:[Object(j.jsx)(x,{}),Object(j.jsxs)("div",{className:"card-content",children:[Object(j.jsx)("div",{className:"card-title center",children:Object(j.jsx)("h4",{style:{fontWeight:500},children:"Login to your account"})}),Object(j.jsxs)("div",{className:"row",children:[Object(j.jsxs)("form",{className:"col s12 m6 offset-m3",onSubmit:function(e){e.preventDefault(),d(c)},children:[Object(j.jsxs)("div",{className:"input-field",children:[Object(j.jsx)("input",{type:"email",name:"email",required:!0,value:v,onChange:y}),Object(j.jsx)("label",{htmlFor:"email",children:"Email"})]}),Object(j.jsxs)("div",{className:"input-field",children:[Object(j.jsx)("input",{type:"password",name:"password",required:!0,value:g,onChange:y}),Object(j.jsx)("label",{htmlFor:"password",children:"Password"})]}),Object(j.jsx)("button",{className:"btn waves-effect teal darken-3 submitBtn",type:"submit",value:"Login",children:"Login"})]}),Object(j.jsx)("div",{className:"row",children:Object(j.jsx)("div",{className:"col s12 m6 offset-m3",children:Object(j.jsxs)("p",{className:"small",children:["Don't have an account? ",Object(j.jsx)(i.b,{to:"/register",children:"Register"})]})})})]})]})]})})},g=function(e){var t=Object(s.useContext)(o).isAuthenticated;return Object(s.useEffect)((function(){t&&e.history.push("/home")})),Object(j.jsx)("div",{id:"showcase",style:{margin:"0 -1rem"},children:Object(j.jsx)("div",{className:"card-container valign-wrapper white-text center",children:Object(j.jsxs)("div",{className:"card transparent",children:[Object(j.jsxs)("div",{className:"card-content center",children:[Object(j.jsxs)("h2",{className:"",children:["OrderMeal ",Object(j.jsx)("span",{className:"amber-text text-lighten-4",children:"Daily"})]}),Object(j.jsx)("p",{className:"flow-text cyan-text",children:"Best food to eat"}),Object(j.jsx)("p",{className:"lead",children:"Order now and get tasty home made taste food to your! "})]}),Object(j.jsx)("div",{className:"card-action",children:Object(j.jsxs)("div",{className:"card-links",children:[Object(j.jsx)("a",{href:"/register",className:"btn btn-large waves-effect waves-light teal darken-3",children:"Register"}),Object(j.jsx)("a",{href:"/login",className:"btn btn-large waves-effect teal darken-3",children:"Login"})]})})]})})})},y=a(15),N=function(e){var t=e.index,a=e.dish,s=e.onEdit,c=a.name,n=a.price,r=a.type,i=a.description,l=function(e){s(e,t)};return Object(j.jsxs)("div",{className:"row",children:[Object(j.jsxs)("div",{className:"input-field col s12 m3",children:[Object(j.jsx)("input",{name:"name",id:"name",type:"text",value:c,onChange:l}),Object(j.jsx)("label",{htmlFor:"name",children:"Name :"})]}),Object(j.jsxs)("div",{className:"input-field col s12 m3",children:[Object(j.jsx)("input",{name:"price",id:"price",type:"number",value:n,onChange:l}),Object(j.jsx)("label",{htmlFor:"price",children:"Price :"})]}),Object(j.jsxs)("div",{className:"input-field col s12 m3",children:[Object(j.jsx)("input",{name:"type",id:"type",type:"text",value:r,onChange:l}),Object(j.jsx)("label",{htmlFor:"type",children:"Type :"})]}),Object(j.jsxs)("div",{className:"input-field col s12 m3",children:[Object(j.jsx)("textarea",{name:"description",id:"description",className:"materialize-textarea",value:i,onChange:l}),Object(j.jsx)("label",{htmlFor:"price",children:"Description"})]})]})},w=function(e){var t=e.addResData,a=Object(s.useState)([{name:"",price:"",type:"",description:""}]),c=Object(O.a)(a,2),n=c[0],r=c[1];Object(s.useEffect)((function(){n.forEach((function(e){var t=e.name,a=e.price,s=e.type,c=e.description;""!==t&&""!==s&&""!==a&&""!==c?document.querySelector("a[href='#done']").classList.remove("disabled"):document.querySelector("a[href='#done']").classList.add("disabled")}))}));var i=function(e,t){var a=Object(y.a)(n);r([].concat(Object(y.a)(a.slice(0,t)),[Object(h.a)(Object(h.a)({},a[t]),{},Object(m.a)({},e.target.name,e.target.value))],Object(y.a)(a.slice(t+1))))};return Object(j.jsxs)("div",{id:"dish",className:"modal modal-fixed-footer",children:[Object(j.jsxs)("div",{className:"modal-content",children:[Object(j.jsx)("h4",{className:"heading",children:"Add Dishes"}),Object(j.jsx)("div",{className:"row",children:Object(j.jsxs)("form",{className:"col s12",children:[n.map((function(e,t){return Object(j.jsx)(N,{index:t,dish:e,onEdit:i},t)})),Object(j.jsx)("a",{className:"btn-floating green waves-effect waves-light red",onClick:function(){r((function(e){return[].concat(Object(y.a)(e),[{name:"",price:"",type:"",description:""}])}))},children:Object(j.jsx)("i",{className:"material-icons",children:"add"})})]})})]}),Object(j.jsxs)("div",{className:"modal-footer",children:[Object(j.jsxs)("a",{href:"#!",className:"left btn grey modal-close waves-effect",children:["Cancel ",Object(j.jsx)("i",{className:"material-icons right",children:"clear"})]}),Object(j.jsxs)("a",{href:"#done",id:"dish-close",className:"right btn orange modal-close waves-effect",onClick:function(e){console.log("dishes",n),t({dishes:n}),console.log("from dishes"),r([{name:"",price:"",type:"",description:""}])},children:["Ok ",Object(j.jsx)("i",{className:"material-icons right",children:"done"})]})]})]})},C=function(e){var t=e.addResData,a=Object(s.useContext)(d),c=a.restaurant,n=a.clearRestaurant,r=a.updateRestaurant,i=Object(s.useState)({name:"",cuisine:"Multi-Cuisine",address:"",description:"",contactNumber:""}),l=Object(O.a)(i,2),o=l[0],u=l[1],b=o.name,p=o.cuisine,x=o.address,f=o.description,v=o.contactNumber;Object(s.useEffect)((function(){""!=b&&""!==p&&""!==x&&""!==f&&""!==v?document.querySelector("a[href='#dish']").classList.remove("disabled"):document.querySelector("a[href='#dish']").classList.add("disabled"),window.M.updateTextFields()})),Object(s.useEffect)((function(){u(null!==c?c:{name:"",cuisine:"Multi-Cuisine",address:"",description:"",contactNumber:""})}),[c]);var g=function(e){u(Object(h.a)(Object(h.a)({},o),{},Object(m.a)({},e.target.name,e.target.value)))};return Object(j.jsxs)("div",{id:"restaurant",className:"modal modal-fixed-footer",children:[Object(j.jsxs)("div",{className:"modal-content",children:[Object(j.jsx)("h4",{className:"center heading",children:"Add Restaurant"}),Object(j.jsx)("div",{className:"row",children:Object(j.jsxs)("form",{className:"form col s12",children:[Object(j.jsx)("div",{className:"row",children:Object(j.jsxs)("div",{className:"input-field col s12 m9 offset-m1",children:[Object(j.jsx)("i",{className:"material-icons prefix",children:"badge"}),Object(j.jsx)("input",{id:"name",name:"name",type:"text",value:b,required:!0,onChange:g}),Object(j.jsx)("label",{htmlFor:"name",className:"active",children:"Name"})]})}),Object(j.jsx)("div",{className:"row",children:Object(j.jsxs)("div",{className:"input-field col s12 m9 offset-m1",children:[Object(j.jsx)("i",{className:"material-icons prefix",children:"dinner_dining"}),Object(j.jsx)("input",{id:"cuisine",name:"cuisine",type:"text",value:p,required:!0,onChange:g}),Object(j.jsx)("label",{htmlFor:"cuisine",className:"active",children:"Cuisine"})]})}),Object(j.jsx)("div",{className:"row",children:Object(j.jsxs)("div",{className:"input-field col s12 m9 offset-m1",children:[Object(j.jsx)("i",{className:"material-icons prefix",children:"home"}),Object(j.jsx)("input",{id:"address",name:"address",type:"text",value:x,required:!0,onChange:g}),Object(j.jsx)("label",{htmlFor:"address",children:"Address"})]})}),Object(j.jsx)("div",{className:"row",children:Object(j.jsxs)("div",{className:"input-field col s12 m9 offset-m1",children:[Object(j.jsx)("i",{className:"material-icons prefix",children:"description"}),Object(j.jsx)("textarea",{name:"description",id:"description",className:"materialize-textarea",value:f,required:!0,onChange:g}),Object(j.jsx)("label",{htmlFor:"description",children:"Description"})]})}),Object(j.jsx)("div",{className:"row",children:Object(j.jsxs)("div",{className:"input-field col s12 m9 offset-m1",children:[Object(j.jsx)("i",{className:"material-icons prefix",children:"phone"}),Object(j.jsx)("input",{id:"contactNumber",name:"contactNumber",type:"number",required:!0,value:v,onChange:g}),Object(j.jsx)("label",{htmlFor:"contactNumber",children:"Contact Number"})]})})]})})]}),Object(j.jsxs)("div",{className:"modal-footer",children:[Object(j.jsxs)("a",{href:"#!",className:"left btn red modal-close waves-effect",onClick:function(){n()},children:["Cancel ",Object(j.jsx)("i",{className:"material-icons right",children:"clear"})]}),c?Object(j.jsx)("a",{href:"#dish",className:"disabled right btn modal-close waves-effect",onClick:function(){r(o)},children:"Update"}):Object(j.jsx)("a",{href:"#dish",className:"disabled right btn modal-close waves-effect modal-trigger",onClick:function(e){t({res:o}),console.log("from restaurant"),u({name:"",cuisine:"Multi-Cuisine",address:"",description:"",contactNumber:""})},children:"Add Dish"})]})]})},k=function(e){var t=e.restaurant,a=t._id,c=t.name,n=t.address,r=t.contactNumber,l=t.description,o=t.cuisine,u=Object(s.useContext)(d).setRestaurant;return Object(j.jsxs)("div",{id:"my-restaurant",className:"card grey darken-3",children:[Object(j.jsxs)("div",{className:"card-content white-text",children:[Object(j.jsxs)("div",{className:"flow-text center",children:["/* ",Object(j.jsx)("span",{style:{color:"orange"},children:c})," */"]}),Object(j.jsxs)("blockquote",{children:[Object(j.jsxs)("p",{style:{fontSize:"1.1rem",marginBottom:"0.5rem"},children:[Object(j.jsx)("span",{style:{color:"orange"},children:"Address:"})," ",n,Object(j.jsx)("br",{}),Object(j.jsx)("span",{style:{color:"orange"},children:"Contact: "})," ",r]}),Object(j.jsx)("p",{style:{fontSize:"1.1rem",marginBottom:"0.5rem"},children:o})]}),Object(j.jsx)("div",{className:"",children:Object(j.jsx)("div",{className:"activator btn-floating left",children:Object(j.jsx)("i",{className:"material-icons center",children:"vertical_align_top"})})})]}),Object(j.jsx)("div",{className:"card-action",children:Object(j.jsxs)("div",{className:"card-links",style:{justifyContent:"space-between"},children:[Object(j.jsx)(i.b,{className:"amber-accent-3-text",to:"/res/".concat(a),children:"View Dishes"}),Object(j.jsxs)("a",{id:"add",className:"btn-flat modal-trigger",href:"#restaurant",style:{background:"teal"},onClick:function(){u(t)},children:["Edit",Object(j.jsx)("i",{className:"large material-icons left",children:"mode_edit"})]})]})}),Object(j.jsxs)("div",{className:"card-reveal grey lighten-4",children:[Object(j.jsxs)("span",{className:"card-title",style:{fontWeight:500},children:["About",Object(j.jsx)("i",{className:"material-icons right",children:"close"})]}),Object(j.jsx)("p",{className:"flow-text",style:{fontSize:"1.3rem"},children:l})]})]})},R=function(){return Object(j.jsx)("div",{className:"spinner preloader-wrapper big active",children:Object(j.jsxs)("div",{className:"spinner-layer spinner-blue-only",children:[Object(j.jsx)("div",{className:"circle-clipper left",children:Object(j.jsx)("div",{className:"circle"})}),Object(j.jsx)("div",{className:"gap-patch",children:Object(j.jsx)("div",{className:"circle"})}),Object(j.jsx)("div",{className:"circle-clipper right",children:Object(j.jsx)("div",{className:"circle"})})]})})},E={display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gridGap:"1rem"},A=function(){var e=Object(s.useContext)(d),t=e.restaurants,a=e.loading;return a?Object(j.jsx)(R,{}):null===t||0!==t.length||a?Object(j.jsx)("div",{className:"section-grid-2",style:E,children:t&&t.length>0&&t.map((function(e){return Object(j.jsx)(k,{restaurant:e},e._id)}))}):Object(j.jsx)("h4",{children:"No Restaurants is there ! ADD some restaurants"})},S=a(3),q=a.n(S),_=a(9),D=function(e){var t=e.order,a=t.amount,s=t.resName,c=t.dishData;return Object(j.jsxs)("div",{id:"order-item",className:"card grey darken-5",children:[Object(j.jsxs)("div",{className:"card-content white-text",children:[Object(j.jsxs)("div",{className:"flow-text center",children:["Rs. ",a]}),Object(j.jsx)("blockquote",{children:Object(j.jsx)("p",{style:{fontSize:"1.1rem",marginBottom:"0.5rem"},children:s})})]}),Object(j.jsx)("div",{className:"card-action",children:Object(j.jsx)("span",{style:{width:"100%"},className:"activator btn center","data-target":t._id,children:"View Order"})}),Object(j.jsxs)("div",{className:"card-reveal",children:[Object(j.jsxs)("span",{className:"card-title grey-text text-darken-1",children:["Your Order",Object(j.jsx)("i",{className:"material-icons right",children:"close"})]}),Object(j.jsx)("ul",{className:"collection",children:c.map((function(e){return e.quantity>0&&Object(j.jsxs)("li",{className:"collection-item",children:[e.dish.name,Object(j.jsxs)("div",{className:"secondary-content",children:[" Qty: ",e.quantity]})]},e.dish._id)}))})]})]})},T={display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gridGap:"1rem"},L=function(){var e=Object(s.useContext)(d),t=e.orders,a=e.loading,c=function(){var t=Object(_.a)(q.a.mark((function t(){return q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getMyOrders();case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(s.useEffect)((function(){c()}),[]),a?Object(j.jsx)(R,{}):null===t||0!==t.length||a?Object(j.jsx)("div",{className:"section-grid-2",style:T,children:t&&t.length>0&&t.map((function(e){return Object(j.jsx)(D,{order:e},e._id)}))}):Object(j.jsx)("h4",{children:"Order Now to refill your stomach"})},M=function(e){var t=Object(s.useContext)(d),a=Object(s.useContext)(o),c=a.user,n=a.loadUser,r=a.isAuthenticated,l=t.createRes,u=t.getMyRes,b=t.clearRestaurant;Object(s.useEffect)((function(){window.M.Modal.init(document.querySelectorAll(".modal"),{opacity:.8,inDuration:450,outDuration:400}),n(),u()}),[]),Object(s.useEffect)((function(){!1===r&&e.history.push("/login"),x.dishes&&g()}));var m=Object(s.useState)({}),p=Object(O.a)(m,2),x=p[0],f=p[1],v=function(e){f(Object(h.a)(Object(h.a)({},x),e))},g=function(){var e=Object.assign(x.res,{dishes:x.dishes});l(e),f({})},y=function(){document.querySelector('label[for="add"]').style.opacity="1",document.querySelector('label[for="add"]').style.display="inline-block"},N=function(){document.querySelector('label[for="add"]').style.opacity="0",document.querySelector('label[for="add"]').style.display="none"},k=Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(A,{}),Object(j.jsxs)("div",{className:"fixed-action-btn",children:[Object(j.jsx)("label",{htmlFor:"add",children:"Add Restaurant"}),Object(j.jsx)("a",{id:"add",onMouseOver:y,onMouseLeave:N,className:"btn btn-floating btn-large amber darken-4 modal-trigger",href:"#restaurant",onClick:function(){b()},children:Object(j.jsx)("i",{className:"large material-icons",children:"add"})})]}),Object(j.jsx)(C,{addResData:v}),Object(j.jsx)(w,{addResData:v})]}),R=Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(L,{}),Object(j.jsxs)("div",{className:"fixed-action-btn",children:[Object(j.jsx)("label",{htmlFor:"add",children:"Order Now"}),Object(j.jsx)(i.b,{id:"add",onMouseOver:y,onMouseLeave:N,className:"btn btn-floating btn-large amber darken-4",to:"/res/all",children:Object(j.jsx)("i",{className:"large material-icons",children:"add_shopping_cart"})})]})]});return Object(j.jsx)("div",{children:c&&"user"===c.role?R:k})},F=function(e){var t=e.dish,a=t.name,s=t.price,c=t.type;return Object(j.jsx)("div",{className:"card grey lighten-3 ",children:Object(j.jsxs)("div",{className:"card-content black-text",children:[Object(j.jsx)("span",{className:"card-title",children:a}),Object(j.jsxs)("blockquote",{style:{fontSize:"1.2rem"},children:[Object(j.jsxs)("p",{children:["Price:"," ",Object(j.jsxs)("span",{className:"cyan-text text-lighten-1",children:["Rs. ",s]})]}),Object(j.jsx)("p",{children:c})]})]})})},P=function(e){var t=e.index,a=e.dish,s=e.onEdit,c=a.name,n=a.price,r=a.type,i=a.description;return Object(j.jsxs)("div",{className:"card grey darken-1",children:[Object(j.jsxs)("div",{className:"card-content white-text",children:[Object(j.jsxs)("span",{className:"card-title",children:["/* ",c," */"]}),Object(j.jsxs)("blockquote",{style:{fontSize:"1.2rem"},children:[Object(j.jsxs)("p",{children:["Price:"," ",Object(j.jsxs)("span",{className:"amber-text text-lighten-1",children:["Rs. ",n]})]}),Object(j.jsx)("p",{children:r})]}),Object(j.jsxs)("span",{className:"activator lead orange-text",style:{cursor:"pointer"},children:["Description ",Object(j.jsx)("i",{className:"material-icons left ",children:"vertical_align_top"})]})]}),Object(j.jsx)("div",{className:"card-action",children:Object(j.jsxs)("div",{className:"input-field",children:[Object(j.jsx)("input",{className:"white-text",name:"quantity",id:"quantity",type:"number",defaultValue:"0",onChange:function(e){s(e,t)}}),Object(j.jsx)("label",{htmlFor:"quantity",className:"white-text active",children:"Enter Quantity"})]})}),Object(j.jsxs)("div",{className:"card-reveal grey lighten-4",children:[Object(j.jsxs)("span",{className:"card-title",style:{fontWeight:500},children:["Description",Object(j.jsx)("i",{className:"material-icons right",children:"close"})]}),Object(j.jsx)("p",{className:"flow-text",style:{fontSize:"1.3rem"},children:i})]})]})},I=Object(l.h)((function(e){var t=e.order;Object(s.useEffect)((function(){window.M.Modal.init(document.querySelector(".modal"))}),[]);var a=Object(s.useContext)(d);return Object(j.jsxs)("div",{id:"order",className:"modal modal-fixed-footer",children:[Object(j.jsxs)("div",{className:"modal-content",children:[Object(j.jsx)("h4",{children:"Confirm Order"}),Object(j.jsxs)("p",{className:"lead",children:["Amount: ",Object(j.jsxs)("strong",{children:["Rs. ",t.amount]})]}),Object(j.jsx)("ul",{className:"collection",children:t.data.map((function(e){return e.quantity>0&&Object(j.jsxs)("li",{className:"collection-item",children:[e.name,Object(j.jsxs)("div",{className:"secondary-content",children:[" Qty: ",e.quantity]})]},e.dish)}))})]}),Object(j.jsxs)("div",{className:"modal-footer",children:[Object(j.jsx)("a",{href:"#!",className:"left btn orange modal-close waves-effect waves-light",children:"Close"}),Object(j.jsx)("a",{href:"#!",className:"right btn modal-close waves-effect waves-light",onClick:function(){var s={amount:t.amount,resName:t.resName,dishData:[]};t.data.forEach((function(e){if(e.quantity>0){var t=e.dish,a=e.quantity;s.dishData.push({dish:t,quantity:a})}})),console.log(s),a.submitOrder(s),e.history.push("/home")},children:"Confirm"})]})]})})),U={display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gridGap:"1rem"},B=function(e){var t=e.match,a=Object(s.useContext)(d),c=Object(s.useContext)(o),n=a.restaurant,r=a.dishes,i=a.loading,l=a.getDishes,u=c.user,b=Object(s.useState)({amount:0,resName:"",data:[]}),p=Object(O.a)(b,2),x=p[0],f=p[1];Object(s.useEffect)((function(){l(t.params.id)}),[]),Object(s.useEffect)((function(){if(u&&"user"===u.role&&r){console.log("second useffect");var e=[];r.forEach((function(t){e.push({dish:t._id,name:t.name,price:t.price,quantity:0})})),f({amount:0,resName:n.name,data:[].concat(e)})}}),[r]),Object(s.useEffect)((function(){x.amount=0,x.data.forEach((function(e){e.quantity=e.quantity||0,x.amount+=e.quantity*e.price})),f(Object(h.a)(Object(h.a)({},x),{},{amount:x.amount})),x.amount>0&&document.getElementById("order-modal")?document.getElementById("order-modal").classList.remove("disabled"):document.getElementById("order-modal")&&document.getElementById("order-modal").classList.add("disabled")}),[x.data]);var v=function(e,t){var a=Object(y.a)(x.data);f(Object(h.a)(Object(h.a)({},x),{},{data:[].concat(Object(y.a)(a.slice(0,t)),[Object(h.a)(Object(h.a)({},a[t]),{},Object(m.a)({},e.target.name,e.target.value))],Object(y.a)(a.slice(t+1)))}))};return!i&&r?Object(j.jsxs)("div",{children:[Object(j.jsx)("div",{className:"section-grid-1",style:U,children:u&&"user"===u.role?r.map((function(e,t){return Object(j.jsx)(P,{index:t,dish:e,onEdit:v},e._id)})):r.map((function(e){return Object(j.jsx)(F,{dish:e},e._id)}))}),u&&"user"===u.role&&Object(j.jsx)("div",{className:"fixed-action-btn",children:Object(j.jsxs)("a",{id:"order-modal",className:"btn btn-large green darken-3 modal-trigger",href:"#order",children:["Order",Object(j.jsx)("i",{className:"material-icons right",children:"inventory"})]})}),Object(j.jsx)(I,{order:x})]}):Object(j.jsx)(R,{})},G=(a(50),"REGISTER_USER"),z="LOGIN_USER",W="USER_LOADED",Y="LOGOUT",V="AUTH_FAIL",H="AUTH_FAIL",Q="REMOVE_ALERT",J="CLEAR_ERRORS",K="SET_RESTAURANT",X="UPDATE_RESTAURANT",Z="CLEAR_RESTAURANT",$="CREATE_RES",ee="SUBMIT_ORDER",te="GET_MY_ORDERS",ae="GET_ALL_RES",se="GET_MY_RES",ce="GET_MY_DISHES",ne="CLEAR_RES",re="ERROR",ie="SET_LOADING",le=function(e,t){switch(t.type){case H:return t.payload;case Q:return null;default:return e}},oe=function(e){var t=Object(s.useReducer)(le,null),a=Object(O.a)(t,2),c=a[0],n=a[1];return Object(j.jsx)(p.Provider,{value:{alert:c,setAlert:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3;n({type:Q}),n({type:H,payload:{msg:e,type:t}}),setTimeout((function(){return n({type:Q})}),a)}},children:e.children})},de=a(8),je=a.n(de),ue=function(e,t){switch(t.type){case $:return Object(h.a)(Object(h.a)({},e),{},{restaurants:[].concat(Object(y.a)(e.restaurants),[t.payload.restaurant]),orders:null});case X:return Object(h.a)(Object(h.a)({},e),{},{restaurants:e.restaurants.map((function(e){return e._id===t.payload.restaurant._id?t.payload.restaurant:e})),restaurant:null,loading:!1});case ee:return e;case ae:return Object(h.a)(Object(h.a)({},e),{},{restaurants:t.payload.restaurants,loading:!1,dishes:null,orders:null});case se:return Object(h.a)(Object(h.a)({},e),{},{restaurants:t.payload.restaurant,loading:!1,error:null,orders:null});case ce:return Object(h.a)(Object(h.a)({},e),{},{restaurant:t.payload.restaurant,dishes:t.payload.restaurant.dishes,loading:!1,error:null,orders:null});case te:return Object(h.a)(Object(h.a)({},e),{},{orders:t.payload.orders,loading:!1,error:null});case K:return Object(h.a)(Object(h.a)({},e),{},{loading:!1,restaurant:t.payload});case ne:return Object(h.a)(Object(h.a)({},e),{},{restaurants:null,dishes:null,restaurant:null,error:null,orders:null});case Z:return Object(h.a)(Object(h.a)({},e),{},{restaurant:null});case re:return Object(h.a)(Object(h.a)({},e),{},{error:t.payload});case ie:return Object(h.a)(Object(h.a)({},e),{},{loading:!0});default:return e}},be=function(e){var t=Object(s.useReducer)(ue,{restaurants:null,restaurant:null,dishes:null,orders:null,loading:!1,error:null}),a=Object(O.a)(t,2),c=a[0],n=a[1],r=function(){n({type:ie})},i=function(){var e=Object(_.a)(q.a.mark((function e(){var t;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(),e.prev=1,e.next=4,je.a.get("/api/res");case 4:t=e.sent,n({type:ae,payload:t.data.data}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0.response.data.msg),n({type:re,payload:e.t0.response.data.msg});case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),l=function(){var e=Object(_.a)(q.a.mark((function e(t){var a,s;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a={headers:{"Content-Type":"application/json"}},e.next=4,je.a.post("/api/res",t,a);case 4:s=e.sent,n({type:$,payload:s.data.data}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0.response.data.msg),n({type:re,payload:e.t0.response.data.msg});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),o=function(){var e=Object(_.a)(q.a.mark((function e(t){var a,s;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a={headers:{"Content-Type":"application/json"}},e.next=4,je.a.patch("/api/res/".concat(t._id),t,a);case 4:s=e.sent,n({type:X,payload:s.data.data}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0.response.data.msg),n({type:re,payload:e.t0.response.data.msg});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=Object(_.a)(q.a.mark((function e(t){var a,s;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a={headers:{"Content-Type":"application/json"}},e.next=4,je.a.post("/api/order",t,a);case 4:s=e.sent,n({type:ee,payload:s.data.data}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0.response.data.msg),n({type:re,payload:e.t0.response.data.msg});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=Object(_.a)(q.a.mark((function e(){var t;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(),e.prev=1,e.next=4,je.a.get("/api/order/my");case 4:t=e.sent,n({type:te,payload:t.data.data}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0.response.data.msg),n({type:re,payload:e.t0.response.data.msg});case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=Object(_.a)(q.a.mark((function e(){var t;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(),e.prev=1,e.next=4,je.a.get("/api/res/my");case 4:t=e.sent,n({type:se,payload:t.data.data}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0.response.data.msg),n({type:re,payload:e.t0.response.data.msg});case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=Object(_.a)(q.a.mark((function e(t){var a;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(),e.prev=1,e.next=4,je.a.get("/api/res/".concat(t));case 4:a=e.sent,n({type:ce,payload:a.data.data}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0.response.data.msg),n({type:re,payload:e.t0.response.data.msg});case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(j.jsx)(d.Provider,{value:{restaurants:c.restaurants,restaurant:c.restaurant,loading:c.loading,error:c.error,orders:c.orders,dishes:c.dishes,getAllRes:i,createRes:l,setRestaurant:function(e){n({type:K,payload:e})},updateRestaurant:o,submitOrder:u,getMyOrders:b,getMyRes:m,clearRes:function(){n({type:ne})},clearRestaurant:function(){n({type:Z})},getDishes:h,setLoading:r},children:e.children})},me=a(35),he=function(e){var t=e.component,a=Object(me.a)(e,["component"]),c=Object(s.useContext)(o),n=c.isAuthenticated,r=c.loading;return Object(j.jsx)(l.b,Object(h.a)(Object(h.a)({},a),{},{render:function(e){return null!==n&&(!0!==n||r?Object(j.jsx)(l.a,{to:"/login"}):Object(j.jsx)(t,Object(h.a)({},e)))}}))},Oe=function(e){e?je.a.defaults.headers.common["x-auth-token"]=e:delete je.a.defaults.headers.common["x-auth-token"]},pe=function(){var e=Object(s.useContext)(d);return Object(s.useEffect)((function(){e.getAllRes()}),[]),Object(j.jsx)(A,{})},xe=function(){return Object(j.jsxs)("div",{className:"center",style:{marginTop:"5rem"},children:[Object(j.jsx)("h1",{style:{fontWeight:700,fontSize:"5rem"},children:"404"}),Object(j.jsx)("h4",{style:{fontWeight:500},children:"Page Not Found"}),Object(j.jsx)("p",{className:"lead",children:"The page that you are looking for does not exist..."}),Object(j.jsx)(i.b,{to:"/home",className:"btn ",children:" Go to the home page "})]})},fe=function(){Object(s.useEffect)((function(){window.M.Sidenav.init(document.querySelector(".sidenav"))}),[]);var e=Object(s.useContext)(o),t=Object(s.useContext)(d);return Object(j.jsxs)("ul",{id:"slide-out",class:"sidenav sidenav-close",children:[Object(j.jsx)("li",{children:Object(j.jsx)(i.b,{to:"/res/all",children:"All Restaurants"})}),Object(j.jsx)("li",{children:Object(j.jsxs)(i.b,{to:"/home",children:["My"," ",e.user&&"user"===e.user.role?"Orders":"Restaurants"]})}),Object(j.jsx)("li",{children:Object(j.jsx)("div",{class:"divider"})}),Object(j.jsx)("li",{children:Object(j.jsx)("a",{href:"/",onClick:function(){e.logout(),t.clearRes()},children:"Logout"})})]})};localStorage.getItem("token")&&Oe(localStorage.token);var ve=function(){var e=Object(s.useContext)(o).isAuthenticated;return Object(j.jsx)("div",{className:"App",children:Object(j.jsx)(oe,{children:Object(j.jsx)(be,{children:Object(j.jsxs)(i.a,{children:[Object(j.jsx)(u,{}),Object(j.jsx)(fe,{}),Object(j.jsx)("div",{className:"main",style:{margin:"0 1rem"},children:Object(j.jsxs)(l.d,{children:[null!==e&&Object(j.jsx)(l.b,{exact:!0,path:"/",component:g}),null!==e&&Object(j.jsx)(l.b,{exact:!0,path:"/register",component:f}),null!==e&&Object(j.jsx)(l.b,{exact:!0,path:"/login",component:v}),Object(j.jsx)(he,{exact:!0,path:"/home",component:M}),Object(j.jsx)(he,{exact:!0,path:"/res/all",component:pe}),Object(j.jsx)(he,{exact:!0,path:"/res/:id",component:B}),null!==e&&Object(j.jsx)(l.b,{path:"*",component:xe})]})}),Object(j.jsx)(b,{})]})})})})},ge=function(e,t){switch(t.type){case W:return Object(h.a)(Object(h.a)({},e),{},{isAuthenticated:!0,loading:!1,user:t.payload.user});case G:case z:return localStorage.setItem("token",t.payload.token),Object(h.a)(Object(h.a)({},e),{},{isAuthenticated:!0,loading:!1});case V:case Y:return localStorage.removeItem("token"),Object(h.a)(Object(h.a)({},e),{},{token:null,isAuthenticated:!1,user:null,loading:!0,error:t.payload});case J:return Object(h.a)(Object(h.a)({},e),{},{error:null});default:return e}},ye=function(e){var t={token:localStorage.getItem("token"),user:null,loading:!0,isAuthenticated:null,error:null},a=Object(s.useReducer)(ge,t),c=Object(O.a)(a,2),n=c[0],r=c[1],i=function(){var e=Object(_.a)(q.a.mark((function e(t){var a,s;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a={headers:{"Content-Type":"application/json"}},e.next=4,je.a.post("/api/auth/register",t,a);case 4:s=e.sent,r({type:G,payload:s.data.data}),d(),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0.response.data.msg),r({type:V,payload:e.t0.response.data.msg});case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=Object(_.a)(q.a.mark((function e(t){var a,s;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a={headers:{"Content-Type":"application/json"}},e.next=4,je.a.post("/api/auth/login",t,a);case 4:s=e.sent,r({type:z,payload:s.data.data}),d(),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0.response.data.msg),r({type:V,payload:e.t0.response.data.msg});case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=Object(_.a)(q.a.mark((function e(){var t;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return localStorage.token&&Oe(localStorage.token),e.prev=1,e.next=4,je.a.get("/api/auth");case 4:t=e.sent,r({type:W,payload:t.data.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),r({type:V});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}();return Object(j.jsx)(o.Provider,{value:{user:n.user,loading:n.loading,isAuthenticated:n.isAuthenticated,error:n.error,register:i,login:l,logout:function(){Oe(),r({type:Y})},loadUser:d,clearErrors:function(){r({type:J})}},children:e.children})};r.a.render(Object(j.jsx)(c.a.StrictMode,{children:Object(j.jsx)(ye,{children:Object(j.jsx)(ve,{})})}),document.getElementById("root"))}},[[69,1,2]]]);
//# sourceMappingURL=main.52723e88.chunk.js.map